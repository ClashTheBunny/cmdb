default-lease-time 3600;
max-lease-time 7200;

# Create option space for Cisco
option space cisco code width 1 length width 1;
option cisco.auto-update-image code 5 = text;

# Package the Cisco namespace into option 125
option space vivso code width 4 length width 1;
option vivso.cisco code 9 = encapsulate cisco;
option option-125 code 125 = encapsulate vivso;

# Create option space for junos
option space juniper;
option juniper.image-file-name code 0 = text;
option juniper.config-file-name code 1 = text;
option juniper.image-file-type code 2 = text;
option juniper.transfer-mode code 3 = text;
option juniper.alt-image-file-name code 4 = text;
option juniper.http-port code 5 = text;

# Workaround: ensure we send the VIVSO option when requested. This
# adds a bogus enterprise suboption.
option vivso.iana code 0 = string;

option domain-name-servers 172.29.64.2, 172.29.64.3;
option ntp-servers 172.29.64.4, 172.29.64.5;

# Failover configuration
failover peer "dhcp-failover" {
  primary;
  address 172.29.64.4;
  port 647;
  peer address 172.29.64.5;
  peer port 647;
  max-response-delay 60;
  max-unacked-updates 10;
  mclt 3600;
  split 128;
  load balance max seconds 3;
}

class "ipmi-dell" {
  match if option vendor-class-identifier = "iDRAC";
}
class "ipmi-gigabyte" {
  match if substring(option vendor-class-identifier, 0, 5)  = "udhcp" and (substring(hardware, 1, 3) = 18:c0:4d or substring(hardware, 1, 3) = b4:2e:99);
}
class "beagle-board" {
  match if substring(hardware, 1, 3) = 0c:b2:b7;
}

# Listen incoming packets on OOB
subnet 172.29.8.0 netmask 255.255.248.0 {
  option routers 172.29.15.254;
  option tftp-server-address 172.29.15.253;

  pool {
    failover peer "dhcp-failover";
    allow members of "ipmi-dell";
    allow members of "ipmi-gigabyte";
    allow members of "beagle-board";
    range 172.29.15.128 172.29.15.191;
  }
}

host ob1-n1.sk1.blade-group.net {
  hardware ethernet 00:21:d7:5d:82:c0;
  fixed-address 172.29.15.12;
  option host-name "ob1-n1.sk1.blade-group.net";
  if suffix(option dhcp-parameter-request-list, 1) = 2b {
    filename "cfg/ob1-n1.sk1.blade-group.net-12.2";
  } else {
    filename "cfg/ob1-n1.sk1.blade-group.net";
  }
  option vivso.iana = 01:01:01;
  option cisco.auto-update-image = "c2960s-universalk9-tar.150-2.SE12.txt";
}
host ob2-n1.sk1.blade-group.net {
  hardware ethernet a8:b1:d4:09:8d:c0;
  fixed-address 172.29.15.13;
  option host-name "ob2-n1.sk1.blade-group.net";
  if suffix(option dhcp-parameter-request-list, 1) = 2b {
    filename "cfg/ob2-n1.sk1.blade-group.net-12.2";
  } else {
    filename "cfg/ob2-n1.sk1.blade-group.net";
  }
  option vivso.iana = 01:01:01;
  option cisco.auto-update-image = "c2960s-universalk9-tar.150-2.SE12.txt";
}
host ob1-p1.sk1.blade-group.net {
  hardware ethernet 00:22:91:fb:49:c0;
  fixed-address 172.29.15.3;
  option host-name "ob1-p1.sk1.blade-group.net";
  if suffix(option dhcp-parameter-request-list, 1) = 2b {
    filename "cfg/ob1-p1.sk1.blade-group.net-12.2";
  } else {
    filename "cfg/ob1-p1.sk1.blade-group.net";
  }
  option vivso.iana = 01:01:01;
  option cisco.auto-update-image = "c2960s-universalk9-tar.150-2.SE12.txt";
}
host ob2-p1.sk1.blade-group.net {
  hardware ethernet 00:1b:0d:4e:c7:40;
  fixed-address 172.29.15.4;
  option host-name "ob2-p1.sk1.blade-group.net";
  if suffix(option dhcp-parameter-request-list, 1) = 2b {
    filename "cfg/ob2-p1.sk1.blade-group.net-12.2";
  } else {
    filename "cfg/ob2-p1.sk1.blade-group.net";
  }
  option vivso.iana = 01:01:01;
  option cisco.auto-update-image = "c2960s-universalk9-tar.150-2.SE12.txt";
}
host ob1-p2.sk1.blade-group.net {
  hardware ethernet 28:93:fe:32:1a:c0;
  fixed-address 172.29.15.5;
  option host-name "ob1-p2.sk1.blade-group.net";
  if suffix(option dhcp-parameter-request-list, 1) = 2b {
    filename "cfg/ob1-p2.sk1.blade-group.net-12.2";
  } else {
    filename "cfg/ob1-p2.sk1.blade-group.net";
  }
  option vivso.iana = 01:01:01;
  option cisco.auto-update-image = "c2960s-universalk9-tar.150-2.SE12.txt";
}
host ob2-p2.sk1.blade-group.net {
  hardware ethernet b4:14:89:6b:12:c0;
  fixed-address 172.29.15.6;
  option host-name "ob2-p2.sk1.blade-group.net";
  if suffix(option dhcp-parameter-request-list, 1) = 2b {
    filename "cfg/ob2-p2.sk1.blade-group.net-12.2";
  } else {
    filename "cfg/ob2-p2.sk1.blade-group.net";
  }
  option vivso.iana = 01:01:01;
  option cisco.auto-update-image = "c2960s-universalk9-tar.150-2.SE12.txt";
}
host spine1.sk1.blade-group.net {
  hardware ethernet f4:8e:38:6a:53:bf;
  fixed-address 172.29.15.14;
  option host-name "spine1.sk1.blade-group.net";
  option default-url = "http://172.29.15.253/images/cumulus-linux-3.7.14.2-bcm-amd64.bin";
}
host spine2.sk1.blade-group.net {
  hardware ethernet 14:18:77:e9:04:06;
  fixed-address 172.29.15.15;
  option host-name "spine2.sk1.blade-group.net";
  option default-url = "http://172.29.15.253/images/cumulus-linux-3.7.14.2-bcm-amd64.bin";
}
host to1-p1.sk1.blade-group.net {
  hardware ethernet f4:8e:38:65:f5:a3;
  fixed-address 172.29.15.16;
  option host-name "to1-p1.sk1.blade-group.net";
  option default-url = "http://172.29.15.253/images/cumulus-linux-3.7.14.2-bcm-amd64.bin";
}
host to2-p1.sk1.blade-group.net {
  hardware ethernet f4:8e:38:65:df:a3;
  fixed-address 172.29.15.17;
  option host-name "to2-p1.sk1.blade-group.net";
  option default-url = "http://172.29.15.253/images/cumulus-linux-3.7.14.2-bcm-amd64.bin";
}
host to1-p2.sk1.blade-group.net {
  hardware ethernet f4:8e:38:65:bf:a3;
  fixed-address 172.29.15.18;
  option host-name "to1-p2.sk1.blade-group.net";
  option default-url = "http://172.29.15.253/images/cumulus-linux-3.7.14.2-bcm-amd64.bin";
}
host to2-p2.sk1.blade-group.net {
  hardware ethernet f4:8e:38:65:ec:a3;
  fixed-address 172.29.15.19;
  option host-name "to2-p2.sk1.blade-group.net";
  option default-url = "http://172.29.15.253/images/cumulus-linux-3.7.14.2-bcm-amd64.bin";
}
host to1-sp2.sk1.blade-group.net {
  hardware ethernet 00:90:FB:5F:37:49;
  fixed-address 172.29.15.30;
  option host-name "to1-sp2.sk1.blade-group.net";
  option default-url = "http://172.29.15.253/images/cumulus-linux-3.7.14.2-bcm-amd64.bin";
}
host to2-sp2.sk1.blade-group.net {
  hardware ethernet 00:90:FB:5F:34:49;
  fixed-address 172.29.15.32;
  option host-name "to2-sp2.sk1.blade-group.net";
  option default-url = "http://172.29.15.253/images/cumulus-linux-3.7.14.2-bcm-amd64.bin";
}
host to1-ap1.sk1.blade-group.net {
  hardware ethernet f4:8e:38:65:bd:a3;
  fixed-address 172.29.15.26;
  option host-name "to1-ap1.sk1.blade-group.net";
  option default-url = "http://172.29.15.253/images/cumulus-linux-3.7.14.2-bcm-amd64.bin";
}
host to2-ap1.sk1.blade-group.net {
  hardware ethernet f4:8e:38:65:ed:a3;
  fixed-address 172.29.15.27;
  option host-name "to2-ap1.sk1.blade-group.net";
  option default-url = "http://172.29.15.253/images/cumulus-linux-3.7.14.2-bcm-amd64.bin";
}

